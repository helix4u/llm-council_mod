# TODO

- [x] Add history compaction (max turns/tokens) and keep context lean.
- [x] Persist only system prompts, user queries, and final replies; move analysis into a separate track.
- [x] Restore Stage 3 synthesis function and end-to-end flow.
- [x] Surface OpenRouter model list with pricing for selection in UI.
- [x] Add dark theme toggle and model search/refresh UI with graceful OpenRouter fallback.
- [ ] Add semantic/LLM-based history summarization for compaction buffer.
- [ ] Expand frontend tests for multi-turn history and settings UI.
- [ ] Show per-turn cost estimates based on chosen models.
